<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>üè° House Price Predictor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* Basic animation */
        .animated {
            animation: fadeIn 1s ease-in-out;
        }
        @keyframes fadeIn {
            from {opacity: 0; transform: translateY(-10px);}
            to {opacity: 1; transform: translateY(0);}
        }
        .error {color: red; margin: 10px 0;}
        .form-group input {width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ccc;}
        .btn {background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;}
        .btn:hover {background-color: #45a049;}
        .result-card {margin-top: 20px; padding: 20px; border-radius: 10px; background: #f0f8ff; box-shadow: 0px 4px 8px rgba(0,0,0,0.1);}
        .price {font-size: 1.8rem; font-weight: bold;}
        #trendChart {margin-top: 30px;}
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">üè° House Price Predictor</h1>
        <p class="subtitle">Enter house features to get an instant prediction</p>

        {% if error_message %}
            <div class="error">{{ error_message }}</div>
        {% endif %}

        <form method="POST" class="form">
            <div class="form-grid">
                {% for feature in ['OverallQual','GrLivArea','GarageCars','TotalBsmtSF','1stFlrSF','FullBath','GarageArea','YearBuilt','YearRemodAdd','MasVnrArea'] %}
                    <div class="form-group">
                        <label for="{{ feature }}">{{ feature }}</label>
                        <input type="number" step="any" name="{{ feature }}" id="{{ feature }}"
                               value="{{ input_values[feature] if input_values and feature in input_values else '' }}" required>
                    </div>
                {% endfor %}
            </div>
            <button type="submit" class="btn">Predict Price</button>
        </form>

        {% if predicted_price %}
            <div class="result-card animated">
                <h2>Predicted Price</h2>
                <p class="price">{{ predicted_price }}</p>
            </div>
        {% endif %}

        {% if trend_data %}
            <h3>Future Price Trend (Next 10 Years)</h3>
            <canvas id="trendChart" width="400" height="200"></canvas>
            <script>
                const ctx = document.getElementById('trendChart').getContext('2d');
                const trendChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: {{ trend_data.years | safe }},
                        datasets: [{
                            label: 'Predicted Price',
                            data: {{ trend_data.prices | safe }},
                            borderColor: 'rgba(75, 192, 192, 1)',
                            backgroundColor: 'rgba(75, 192, 192, 0.2)',
                            fill: true,
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: { legend: { display: true } },
                        scales: {
                            y: { beginAtZero: false, title: { display: true, text: 'Price ($)' } },
                            x: { title: { display: true, text: 'Year' } }
                        }
                    }
                });
            </script>
        {% endif %}
    </div>
</body>
</html>
